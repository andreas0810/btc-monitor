<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BitMine Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0c0f;
    --surface: #0f1318;
    --surface2: #151b24;
    --border: #1e2d3d;
    --orange: #f7931a;
    --orange-dim: rgba(247,147,26,0.15);
    --orange-glow: rgba(247,147,26,0.4);
    --green: #00ff9d;
    --green-dim: rgba(0,255,157,0.1);
    --text: #c8d8e8;
    --text-dim: #5a7a96;
    --red: #ff4d4d;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Scanline overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.03) 2px,
      rgba(0,0,0,0.03) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  /* Login Screen */
  #login-screen {
    position: fixed;
    inset: 0;
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }

  .login-box {
    border: 1px solid var(--orange);
    box-shadow: 0 0 40px var(--orange-glow), inset 0 0 40px rgba(247,147,26,0.03);
    padding: 48px;
    width: 380px;
    background: var(--surface);
    position: relative;
  }

  .login-box::before {
    content: '';
    position: absolute;
    top: -1px; left: 20px; right: 20px; height: 2px;
    background: var(--orange);
  }

  .login-logo {
    font-family: 'Orbitron', monospace;
    font-size: 28px;
    font-weight: 900;
    color: var(--orange);
    text-align: center;
    margin-bottom: 8px;
    letter-spacing: 4px;
    text-shadow: 0 0 20px var(--orange-glow);
  }

  .login-sub {
    text-align: center;
    color: var(--text-dim);
    font-size: 11px;
    letter-spacing: 3px;
    margin-bottom: 36px;
  }

  .field-label {
    font-size: 10px;
    color: var(--orange);
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  .field-wrap { margin-bottom: 20px; }

  input[type="text"], input[type="password"] {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    font-size: 14px;
    padding: 10px 14px;
    outline: none;
    transition: border-color 0.2s;
  }

  input:focus { border-color: var(--orange); box-shadow: 0 0 10px var(--orange-glow); }

  .btn-login {
    width: 100%;
    background: var(--orange);
    color: #000;
    border: none;
    font-family: 'Orbitron', monospace;
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 3px;
    padding: 14px;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 8px;
  }

  .btn-login:hover { background: #ffaa33; box-shadow: 0 0 20px var(--orange-glow); }

  .demo-hint { text-align: center; color: var(--text-dim); font-size: 10px; margin-top: 16px; }

  /* Dashboard */
  #dashboard { display: none; min-height: 100vh; }

  .topbar {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 0 24px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 50;
  }

  .logo {
    font-family: 'Orbitron', monospace;
    font-size: 18px;
    font-weight: 900;
    color: var(--orange);
    letter-spacing: 3px;
    text-shadow: 0 0 15px var(--orange-glow);
  }

  .logo span { color: var(--text-dim); font-weight: 400; }

  .topbar-right {
    display: flex;
    align-items: center;
    gap: 24px;
  }

  #clock {
    font-size: 18px;
    color: var(--green);
    letter-spacing: 2px;
  }

  .user-badge {
    background: var(--orange-dim);
    border: 1px solid var(--orange);
    padding: 4px 12px;
    font-size: 11px;
    color: var(--orange);
    letter-spacing: 1px;
    cursor: pointer;
  }

  .btn-logout {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-dim);
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    padding: 4px 12px;
    cursor: pointer;
    letter-spacing: 1px;
    transition: all 0.2s;
  }
  .btn-logout:hover { border-color: var(--red); color: var(--red); }

  .main-content {
    padding: 24px;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Grid */
  .grid-top {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .grid-mid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .grid-bottom {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
  }

  /* Cards */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 20px;
    position: relative;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--orange), transparent);
    opacity: 0.5;
  }

  .card-label {
    font-size: 9px;
    letter-spacing: 3px;
    color: var(--text-dim);
    margin-bottom: 12px;
    text-transform: uppercase;
  }

  .card-value {
    font-family: 'Orbitron', monospace;
    font-size: 28px;
    font-weight: 700;
    color: var(--orange);
    text-shadow: 0 0 15px var(--orange-glow);
    line-height: 1;
  }

  .card-value.green { color: var(--green); text-shadow: 0 0 15px rgba(0,255,157,0.4); }
  .card-value.small { font-size: 16px; }

  .card-sub { font-size: 11px; color: var(--text-dim); margin-top: 6px; }

  /* Bitcoin price */
  #btc-change {
    font-size: 12px;
    padding: 2px 8px;
    margin-top: 8px;
    display: inline-block;
  }
  .positive { color: var(--green); border: 1px solid var(--green); }
  .negative { color: var(--red); border: 1px solid var(--red); }

  /* Pool Stats Card */
  .pool-card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 20px;
    position: relative;
  }

  .pool-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--green), transparent);
    opacity: 0.5;
  }

  .pool-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
  }

  .pool-row:last-child { border-bottom: none; }

  .pool-key {
    font-size: 10px;
    color: var(--text-dim);
    letter-spacing: 2px;
  }

  .pool-val {
    font-size: 13px;
    color: var(--text);
  }

  .pool-val.highlight {
    color: var(--green);
    font-size: 16px;
    font-family: 'Orbitron', monospace;
    font-weight: 700;
  }

  /* Status indicator */
  .status-dot {
    display: inline-block;
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--green);
    margin-right: 8px;
    box-shadow: 0 0 6px var(--green);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  /* Chart */
  .chart-container {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 20px;
    position: relative;
  }

  .chart-container::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--orange), transparent);
    opacity: 0.5;
  }

  canvas { width: 100% !important; display: block; }

  /* Miner Hardware */
  .miner-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 12px;
  }

  .miner-unit {
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 14px;
  }

  .miner-name {
    font-size: 10px;
    color: var(--orange);
    letter-spacing: 2px;
    margin-bottom: 8px;
  }

  .miner-stat { font-size: 11px; color: var(--text-dim); margin-bottom: 4px; }
  .miner-stat span { color: var(--text); }

  /* Footer */
  .footer {
    text-align: center;
    padding: 24px;
    color: var(--text-dim);
    font-size: 10px;
    letter-spacing: 2px;
    border-top: 1px solid var(--border);
    margin-top: 24px;
  }

  .wallet-addr {
    font-size: 9px;
    color: var(--text-dim);
    word-break: break-all;
    margin-top: 4px;
    opacity: 0.5;
  }

  /* Loading state */
  .loading { color: var(--text-dim); font-size: 12px; animation: blink 1s infinite; }
  @keyframes blink { 0%,100% { opacity:1 } 50% { opacity:0.2 } }

  /* Responsive */
  @media (max-width: 900px) {
    .grid-top { grid-template-columns: 1fr 1fr; }
    .grid-mid { grid-template-columns: 1fr; }
    .miner-grid { grid-template-columns: 1fr; }
  }
  @media (max-width: 600px) {
    .grid-top { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <div class="login-box">
    <div class="login-logo">‚õè BITMINE</div>
    <div class="login-sub">SOLO MINING DASHBOARD</div>
    <div class="field-wrap">
      <div class="field-label">BENUTZER</div>
      <input type="text" id="username" placeholder="admin" value="admin">
    </div>
    <div class="field-wrap">
      <div class="field-label">PASSWORT</div>
      <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" value="admin">
    </div>
    <button class="btn-login" onclick="login()">ANMELDEN</button>
    <div class="demo-hint">Demo: admin / admin</div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">
  <div class="topbar">
    <div class="logo">‚õè BIT<span>MINE</span></div>
    <div class="topbar-right">
      <div id="clock">--:--:--</div>
      <div class="user-badge" id="user-label">ADMIN</div>
      <button class="btn-logout" onclick="logout()">ABMELDEN</button>
    </div>
  </div>

  <div class="main-content">

    <!-- TOP ROW: KPI Cards -->
    <div class="grid-top">
      <!-- Bitcoin Preis -->
      <div class="card">
        <div class="card-label">‚Çø Bitcoin Kurs</div>
        <div class="card-value" id="btc-price"><span class="loading">LADEN...</span></div>
        <div id="btc-change" class="positive">-- %</div>
        <div class="card-sub">Aktueller BTC/EUR Preis</div>
      </div>

      <!-- Hashrate -->
      <div class="card">
        <div class="card-label">‚ö° Aktuelle Hashrate</div>
        <div class="card-value green" id="hashrate"><span class="loading">LADEN...</span></div>
        <div class="card-sub"><span class="status-dot"></span>Pool: solo.ckpool.org</div>
      </div>

      <!-- Uhrzeit / Datum -->
      <div class="card">
        <div class="card-label">‚è± System Zeit</div>
        <div class="card-value small green" id="date-display">--.--.----</div>
        <div class="card-value" id="time-large" style="font-size:32px">--:--:--</div>
      </div>
    </div>

    <!-- MID ROW -->
    <div class="grid-mid">

      <!-- Pool Statistiken -->
      <div class="pool-card">
        <div class="card-label" style="color: var(--text-dim)">üéØ CK POOL STATISTIKEN</div>
        <div class="pool-row">
          <div class="pool-key">HASHRATE (LIVE)</div>
          <div class="pool-val highlight" id="pool-hashrate"><span class="loading">LADEN...</span></div>
        </div>
        <div class="pool-row">
          <div class="pool-key">LETZTER BLOCK</div>
          <div class="pool-val" id="pool-lastblock">‚Äì</div>
        </div>
        <div class="pool-row">
          <div class="pool-key">BLOCK GEFUNDEN AM</div>
          <div class="pool-val" id="pool-lastblock-time">‚Äì</div>
        </div>
        <div class="pool-row">
          <div class="pool-key">BEST SHARE</div>
          <div class="pool-val" id="pool-bestshare">‚Äì</div>
        </div>
        <div class="pool-row">
          <div class="pool-key">WALLET ADRESSE</div>
          <div class="pool-val" style="font-size:9px; word-break:break-all; color:var(--text-dim)">bc1qpmvg0xqvqy38hfkr0c7pmxtxzxz9vlvp27f7rw</div>
        </div>
      </div>

      <!-- Hardware -->
      <div class="card">
        <div class="card-label">üñ• MINER HARDWARE</div>
        <div class="miner-grid">
          <div class="miner-unit">
            <div class="miner-name">MINER #1</div>
            <div class="miner-stat">Modell: <span>Antminer S9</span></div>
            <div class="miner-stat">Hashrate: <span style="color:var(--green)">~5 TH/s</span></div>
            <div class="miner-stat">Status: <span><span class="status-dot"></span>ONLINE</span></div>
            <div class="miner-stat">Verbrauch: <span>~1.3 kW</span></div>
          </div>
          <div class="miner-unit">
            <div class="miner-name">MINER #2</div>
            <div class="miner-stat">Modell: <span>Antminer S9</span></div>
            <div class="miner-stat">Hashrate: <span style="color:var(--green)">~5 TH/s</span></div>
            <div class="miner-stat">Status: <span><span class="status-dot"></span>ONLINE</span></div>
            <div class="miner-stat">Verbrauch: <span>~1.3 kW</span></div>
          </div>
        </div>
        <div style="margin-top:16px; padding-top:16px; border-top:1px solid var(--border)">
          <div style="font-size:10px; color:var(--text-dim); margin-bottom:4px">GESAMT HASHRATE</div>
          <div style="font-family: Orbitron; font-size:24px; color:var(--orange); text-shadow: 0 0 15px var(--orange-glow)">~10 TH/s</div>
        </div>
      </div>
    </div>

    <!-- CHART -->
    <div class="grid-bottom">
      <div class="chart-container">
        <div class="card-label">üìä HASHRATE VERLAUF (24H SIMULATION)</div>
        <canvas id="hashrateChart" height="200"></canvas>
      </div>
    </div>

  </div>

  <div class="footer">
    BITMINE DASHBOARD v1.0 ‚Äî SOLO MINING NODE
    <div class="wallet-addr">bc1qpmvg0xqvqy38hfkr0c7pmxtxzxz9vlvp27f7rw</div>
  </div>
</div>

<script>
// === AUTH ===
const USERS = {
  admin: { pass: 'admin', label: 'ADMIN' },
  user1: { pass: 'pass1', label: 'NUTZER 1' },
  user2: { pass: 'pass2', label: 'NUTZER 2' },
};

function login() {
  const u = document.getElementById('username').value;
  const p = document.getElementById('password').value;
  if (USERS[u] && USERS[u].pass === p) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
    document.getElementById('user-label').textContent = USERS[u].label;
    startDashboard();
  } else {
    alert('‚ùå Ung√ºltige Anmeldedaten!');
  }
}

function logout() {
  document.getElementById('login-screen').style.display = 'flex';
  document.getElementById('dashboard').style.display = 'none';
}

document.getElementById('password').addEventListener('keydown', e => {
  if (e.key === 'Enter') login();
});

// === CLOCK ===
function updateClock() {
  const now = new Date();
  const pad = n => String(n).padStart(2, '0');
  const timeStr = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
  const dateStr = `${pad(now.getDate())}.${pad(now.getMonth()+1)}.${now.getFullYear()}`;
  document.getElementById('clock').textContent = timeStr;
  document.getElementById('time-large').textContent = timeStr;
  document.getElementById('date-display').textContent = dateStr;
}

// === BITCOIN PRICE ===
async function fetchBTCPrice() {
  try {
    const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=eur&include_24hr_change=true');
    const data = await res.json();
    const price = data.bitcoin.eur;
    const change = data.bitcoin.eur_24h_change;
    document.getElementById('btc-price').textContent = '‚Ç¨' + price.toLocaleString('de-DE');
    const changeEl = document.getElementById('btc-change');
    changeEl.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '% (24h)';
    changeEl.className = change >= 0 ? 'positive' : 'negative';
  } catch(e) {
    document.getElementById('btc-price').textContent = 'API FEHLER';
  }
}

// === CKPOOL API ===
// NOTE: Real API requires CORS proxy or backend. This simulates realistic data.
// To use real data: fetch from https://solo.ckpool.org/users/bc1qpmvg0xqvqy38hfkr0c7pmxtxzxz9vlvp27f7rw
// via a backend proxy.

function simulatePoolData() {
  // Realistic simulation for 10 TH/s miner
  const hashrates = ['9.8 TH/s', '10.1 TH/s', '9.6 TH/s', '10.3 TH/s', '9.9 TH/s'];
  const hr = hashrates[Math.floor(Math.random() * hashrates.length)];
  
  document.getElementById('hashrate').textContent = hr;
  document.getElementById('pool-hashrate').textContent = hr;
  document.getElementById('pool-lastblock').textContent = 'Block #881,234';
  document.getElementById('pool-lastblock-time').textContent = 'Noch nicht gefunden';
  document.getElementById('pool-bestshare').textContent = '1.2 T';
}

// === CHART ===
function initChart() {
  const canvas = document.getElementById('hashrateChart');
  const ctx = canvas.getContext('2d');

  // Generate 24h of simulated data
  const labels = [];
  const data = [];
  const now = new Date();
  for (let i = 23; i >= 0; i--) {
    const h = new Date(now - i * 3600000);
    labels.push(`${String(h.getHours()).padStart(2,'0')}:00`);
    // Simulate hashrate with noise around 10 TH/s
    data.push((9 + Math.random() * 2).toFixed(2));
  }

  const gradient = ctx.createLinearGradient(0, 0, 0, 200);
  gradient.addColorStop(0, 'rgba(247,147,26,0.4)');
  gradient.addColorStop(1, 'rgba(247,147,26,0.01)');

  // Manual chart drawing
  const W = canvas.offsetWidth || 800;
  const H = 200;
  canvas.width = W;
  canvas.height = H;

  const pad = { top: 20, right: 20, bottom: 30, left: 50 };
  const cw = W - pad.left - pad.right;
  const ch = H - pad.top - pad.bottom;
  const maxVal = 12, minVal = 8;

  ctx.clearRect(0, 0, W, H);

  // Grid lines
  ctx.strokeStyle = '#1e2d3d';
  ctx.lineWidth = 1;
  for (let g = 0; g <= 4; g++) {
    const y = pad.top + (g / 4) * ch;
    ctx.beginPath();
    ctx.moveTo(pad.left, y);
    ctx.lineTo(W - pad.right, y);
    ctx.stroke();
    ctx.fillStyle = '#5a7a96';
    ctx.font = '10px Share Tech Mono';
    ctx.fillText((maxVal - g * (maxVal - minVal) / 4).toFixed(0) + 'TH', 0, y + 4);
  }

  // X labels
  ctx.fillStyle = '#5a7a96';
  ctx.font = '9px Share Tech Mono';
  for (let i = 0; i < labels.length; i += 4) {
    const x = pad.left + (i / (data.length - 1)) * cw;
    ctx.fillText(labels[i], x - 15, H - 6);
  }

  // Fill
  const pts = data.map((v, i) => ({
    x: pad.left + (i / (data.length - 1)) * cw,
    y: pad.top + (1 - (v - minVal) / (maxVal - minVal)) * ch
  }));

  ctx.beginPath();
  ctx.moveTo(pts[0].x, H - pad.bottom);
  ctx.lineTo(pts[0].x, pts[0].y);
  for (let i = 1; i < pts.length; i++) {
    ctx.lineTo(pts[i].x, pts[i].y);
  }
  ctx.lineTo(pts[pts.length-1].x, H - pad.bottom);
  ctx.closePath();
  ctx.fillStyle = gradient;
  ctx.fill();

  // Line
  ctx.beginPath();
  ctx.moveTo(pts[0].x, pts[0].y);
  for (let i = 1; i < pts.length; i++) {
    ctx.lineTo(pts[i].x, pts[i].y);
  }
  ctx.strokeStyle = '#f7931a';
  ctx.lineWidth = 2;
  ctx.stroke();

  // Glow dots at current point
  const last = pts[pts.length - 1];
  ctx.beginPath();
  ctx.arc(last.x, last.y, 5, 0, Math.PI * 2);
  ctx.fillStyle = '#f7931a';
  ctx.shadowColor = '#f7931a';
  ctx.shadowBlur = 15;
  ctx.fill();
  ctx.shadowBlur = 0;
}

// === INIT ===
function startDashboard() {
  updateClock();
  setInterval(updateClock, 1000);
  fetchBTCPrice();
  setInterval(fetchBTCPrice, 60000);
  simulatePoolData();
  setInterval(simulatePoolData, 30000);
  setTimeout(initChart, 100);
}
</script>
</body>
</html>
